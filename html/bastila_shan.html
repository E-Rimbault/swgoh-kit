<!DOCTYPE html>
<html lang="en">

<head>
    <title id="big-title">Bastila Shan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="author" content="Rimbault Enzo">
    <link rel="icon" type="image/png" href="../image-perso/bastila-shan/bastila-image.png">
    <link rel="stylesheet" href="../style/unit-style.css">
</head>

<body class="simple">
    <header class="perso" style="display: flex; align-items: center;">
        <div style="flex: 0 0 20%; display: flex; justify-content: center; align-items: center;">
            <img src="../image-perso/bastila-shan/bastila-image.png" alt="" style="max-width: 100%; max-height: 100%;">
        </div>
        <div style="flex: 1; padding-left: 20px;">
            <!-- Sélecteur de langue -->
            <div class="language-switcher">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Flag_of_France.svg" alt="Français"
                    id="lang-fr"
                    style="cursor:pointer; width:32px; height:32px; border:2px solid transparent; border-radius:50%;">
                <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" alt="English"
                    id="lang-en"
                    style="cursor:pointer; width:32px; height:32px; border:2px solid transparent; border-radius:50%;">
            </div>

            <h1 id="title"><u>Bastila Shan</u></h1>
            <p id="description">
                Strong Jedi Support that grants allies an overwhelming first turn with her Leader ability
            </p>
            <br>

            <nav class="perso" style="font-size: 20px;">
                <a class="capacite" style="color:blue !important" href="../classement-perso/coté-lumineux.html"
                    id="lightside">Light Side</a>
                <a class="class" href="../classement-perso/soutien.html" id="support">Support</a>
                <a class="capacite" href="../classement-perso/chef.html" id="leader">Leader</a>
                <a class="capacite" href="../classement-perso/jedi.html" id="jedi">Jedi</a>
                <a class="capacite" href="../classement-perso/ancienne-république.html" id="old">Old Republic</a>
            </nav>
        </div>
    </header>
    <br>

    <img class="first" src="../image-perso/bastila-shan/Bastila-shan.png" alt="Bastila Shan"><br>

    <!-- Capacités -->

    <h2 class="titre" id="basic-attack-title"><u>Basic Attack: Jedi Assault</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Bastila Shan basic" src="../image-perso/bastila-shan/bastila-basic.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="basic-attack">
                Deal Special damage to target enemy and inflict Ability Block for 1 turn. This attack deals 20% more damage and has +20% Potency for each active Jedi ally.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack1-title"><u>Special Attack: Rally (cooldown: 4)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Bastila spe 1" src="../image-perso/bastila-shan/bastila-spe1.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack1">
                Bastila dispels all debuffs from herself and another target ally. They both gain Offense, Defense,
                Speed, Accuracy, and Critical Chance Up for 3 turns, then Bastila calls that ally to assist.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack2-title"><u>Special Attack: Subvert Defenses (cooldown: 2)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bastila spe 2" src="../image-perso/bastila-shan/bastila-spe2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack2">
                Deal Special damage to target enemy and dispel all buffs on them. Stun them for 1 turn and inflict Buff
                Immunity for 2 turns..
            </p>
        </div>
    </div>

    <h2 class="titre" id="lead-ability-title"><u>Leader Ability: Initiative</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="basila lead" src="../image-perso/bastila-shan/bastila-lead.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="lead-ability">
                At the start of the battle, Jedi allies gain 15% Turn Meter and Protection Up (200%, can't be
                dispelled), and Jedi Tank allies Taunt for 1 turn. While Jedi allies have Protection Up, they have +150%
                Tenacity and deal 35% more damage.
            </p>
        </div>
    </div>

    <h2 class="titre" id="unique-ability1-title"><u>Unique Ability: Legendary Battle Meditation</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bastila unic" src="../image-perso/bastila-shan/bastila-unique1.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability1">
                At the start of Bastila's turn, she recovers 2% Protection for each buff she has and all other allies
                gain 3% Turn Meter (doubled for Jedi) and <u class="speciale">Legendary Battle Meditation</u> for 1
                turn.
                <br><br>
                <u class="speciale">Legendary Battle Meditation:</u> +50% Potency and +35% counter chance (doubled for
                Jedi). Legendary Battle Meditation can't be dispelled.
            </p>
        </div>
    </div>

    <h2 class="titre" id="unique-ability2-title"><u>Unique Ability: Force Bond</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bastila unique 2" src="../image-perso/bastila-shan/bastila-uniqu-2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability2">
                If Jedi Knight Revan is in the leader slot: Bastila and Jedi Knight Revan have +70% Accuracy, Potency,
                and Tenacity. Jedi Knight Revan also recovers Protection from Legendary Battle Meditation.
                <br><br>
                If Darth Revan is on the enemy squad: Bastila gains Advantage and Retribution for 1 turn at the start of
                Darth Revan's turns.
            </p>
        </div>
    </div>

    <footer>
        <button onclick="scrollToTop()" id="scrollBtn" title="Go to top">Top</button>
        <script src="../javascript/bouton.js"></script>

        <!-- SCRIPT DE TRADUCTION -->
        <script>
            // Dictionnaire français
            const translationsFr = {
                "title": "<u>Bastila Shan</u>",
                "description": "Puissante Jedi de soutien qui confère d'extraordinaires améliorations dès le premier tour grâce à sa capacité de chef.",
                "lightside": "Côté Lumineux",
                "support": "Soutien",
                "leader": "Chef",
                "jedi": "Jedi",
                "old": "Ancienne République",

                "basic-attack-title": "<u>Attaque Basique : Assaut Jedi</u>",
                "basic-attack": "Inflige des dégâts spéciaux à la cible ennemie et entrave ses capacités pendant 1 tour. Cette attaque confère un bonus de dégâts de 20% et un bonus de pouvoir de 20% pour chaque allié Jedi actif.",
                
                "special-attack1-title": "<u>Attaque Spéciale : Ralliement (délai : 4)</u>",
                "special-attack1": "Bastila dissipe tous les affaiblissements l'affectant elle et une cible alliée. Tous deux bénéficient d'un bonus d'attaque, de défense, de vitesse, de précision et de chances de coup critique pendant 3 tours, puis Bastila invoque cet allié.",
                
                "special-attack2-title": "<u>Attaque Spéciale : Sabotage des défenses (délai : 2)</u>",
                "special-attack2": "Inflige des dégâts spéciaux à la cible ennemie et dissipe toutes ses améliorations. Inflige l'étourdissement pendant 1 tour et lui inflige l'immunité aux améliorations pendant 2 tours.",
                
                "lead-ability-title": "<u>Capacité de Chef : Initiative</u>",
                "lead-ability": "Au début de la bataille, les alliés Jedi bénéficient d'une hausse de protection (200%, ne peut pas être dissipé), leur jauge de tour se remplit de 15%, et les tanks jedi alliés utilisent la raillerie pendant 1 tour. Si les alliés Jedi bénéficient d'une hausse de protection, ils ont un bonus de ténacité de +150% et ils infligent 35% de dégâts supplémentaires.",
                
                "unique-ability1-title": "<u>Capacité Unique : Méditation de combat légendaire</u>",
                "unique-ability1": "Au début de son tour, Bastila récupère 2% de protection pour chaque amélioration dont elle bénéficie. La jauge de tour de tous les alliés augmente de 3% (doublé pour les Jedi) et ils obtiennent la <u class='speciale'>Méditation de combat légendaire :</u> pendant 1 tour.\n\n<u class='speciale'>Méditation de combat légendaire :</u> +50% de pouvoir et +35% de chances de contre-attaque (doublé pour les Jedi). La Méditation de combat légendaire ne peut pas être dissipée.",
                
                "unique-ability2-title": "<u>Capacité Unique : Lien de Force</u>",
                "unique-ability2": "Si le Chevalier Jedi Revan est dans l'emplacement de chef : Bastila et le Chevalier Jedi Revan bénéficient tous les deux de +70 % de précision, de pouvoir et de ténacité. Le Chevalier Jedi Revan récupère également de la protection avec la Méditation de combat légendaire.\n\nSi Dark Revan est dans l'escouade ennemie, Bastila gagne l'avantage et la rétribution pendant 1 tour au début du tour de Dark Revan."
            };

            const originalTexts = {};

            function saveOriginalTexts() {
                for (const id in translationsFr) {
                    const el = document.getElementById(id);
                    if (el) originalTexts[id] = el.innerHTML;
                }
            }

            function replaceNewLinesWithBr(text) {
                return text.replace(/\n\s*\n/g, '<br><br>').replace(/([^\n])\n([^\n])/g, '$1<br>$2');
            }

            function switchLanguageTo(lang) {
                sessionStorage.setItem("selectedLanguage", lang);

                if (lang === "fr") {
                    for (const [id, text] of Object.entries(translationsFr)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = replaceNewLinesWithBr(text);
                    }
                } else if (lang === "en") {
                    for (const [id, text] of Object.entries(originalTexts)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = text;
                    }
                }

                updateFlagActive();
            }

            function updateFlagActive() {
                const lang = sessionStorage.getItem("selectedLanguage") || "en";
                document.getElementById("lang-en").style.borderColor = (lang === "en" ? "#007bff" : "transparent");
                document.getElementById("lang-fr").style.borderColor = (lang === "fr" ? "#007bff" : "transparent");
            }

            // ✅ Tout est dans "load" → le DOM est prêt avant exécution
            window.addEventListener("load", () => {
                saveOriginalTexts();
                const lang = sessionStorage.getItem("selectedLanguage") || "en";
                switchLanguageTo(lang);

                document.getElementById("lang-fr").addEventListener("click", () => switchLanguageTo("fr"));
                document.getElementById("lang-en").addEventListener("click", () => switchLanguageTo("en"));
            });
        </script>


    </footer>
</body>

</html>