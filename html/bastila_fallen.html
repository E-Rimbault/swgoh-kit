<!DOCTYPE html>
<html lang="en">

<head>
    <title id="big-title"></title>

    <!-- Les métadonnées pour le rendu sur différents appareils -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="author" content="Rimbault Enzo">

    <!-- Lien vers l'icône du site -->
    <link rel="icon" type="image/png" href="../image-perso/bsf/bastila-image.png">

    <!-- Lien vers la feuille de style -->
    <link rel="stylesheet" href="../style/unit-style.css">
</head>

<body class="simple">

    <!-- Entête de la page -->
    <header class="perso" style="display: flex; align-items: center;">
        <div style="flex: 0 0 20%; display: flex; justify-content: center; align-items: center;">
            <img src="../image-perso/bsf/bastila-image.png" alt="" style="max-width: 100%; max-height: 100%;">
        </div>
        <div style="flex: 1; padding-left: 20px;">
            <div class="language-switcher">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Flag_of_France.svg" alt="Français"
                    onclick="switchLanguage('fr')">
                <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" alt="English"
                    onclick="switchLanguage('en')">
            </div>
            <h1 id="title"><u>Bastila Shan (Fallen)</u></h1>
            <p id="description">
                Strong Sith Support who inflicts a large number of debuffs including Shock, Fear, and Corrupted Battle
                Meditation
            </p>
            <br>

            <nav class="perso" style="font-size: 20px;">
                <a class="capacite" style="color: red !important" href="../classement-perso/coté-obscur.html" id="darkside">Dark
                    Side</a>
                <a class="class" href="../classement-perso/soutien.html" id="support">Support</a>
                <a class="capacite" href="../classement-perso/sith.html" id="sith">Sith</a>
                <a class="capacite" href="../classement-perso/empire-sith.html" id="sith-empire">Sith Empire</a>
            </nav>
        </div>
    </header><br>

    <!-- Image principale du personnage -->
    <img class="first" src="../image-perso/bsf/Bastila-fallen.png" alt="Bastila fallen"><br>

    <!-- Section pour les différentes attaques spéciales -->
    <h2 class="titre" id="basic-attack-title"><u>Basic Attack: Sith Assault</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="BSF BASICK" src="../image-perso/bsf/fallen-basique.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="basic-attack">
                Deal Special damage to target enemy and inflict Ability Block for 1 turn. This attack deals 10% more
                damage and has +10% Critical Chance for each active Sith ally.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack1-title"><u>Special Attack: Wild Lightning (cooldown: 2)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bsf spé 1" src="../image-perso/bsf/fallen-spe1.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack1">
                Deal Special damage to target enemy and Shock them for 3 turns. If the target already had Shock, deal
                bonus Special damage to all enemies. This bonus damage can't be countered. This ability can't be evaded.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack2-title"><u>Special Attack: Fear (cooldown: 3)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bsf spé 2" src="../image-perso/bsf/fallen-spe2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack2">
                Inflict <u class="speciale">Fear</u> on target enemy and another random enemy for 1 turn, which can't be
                copied or dispelled. When each of these Fears expire, inflict Offense Down, Critical Damage Down,
                Evasion Down, Speed Down, Expose and Stagger for 2 turns. These effects can't be resisted.
                <br><br>
                All other enemies are inflicted with Offense Down, Critical Damage Down, Evasion Down, Speed Down,
                Expose, and Stagger for 2 turns.
                <br><br>
                <u class="speciale">Fear</u> Miss the next turn, can't use abilities, and can't evade. Increase
                cooldowns by 1 and Fear expires on taking damage from an attack.
            </p>
        </div>
    </div>

    <h2 class="titre" id="unique-ability-title"><u>Unique Ability: Corrupted Battle Meditation</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bastila unique" src="../image-perso/bsf/fallen-unique.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability">
                At the start of Bastila's turn, all enemies lose 3% Turn Meter (doubled against non-Jedi and non-Sith)
                and are inflicted with <u class="speciale">Corrupted Battle Meditation</u> for 1 turn. Then Bastila
                recovers 1% Protection for each debuff on enemies.
                <br><br>
                <u class="speciale">Corrupted Battle Meditation:</u> -30% Critical Chance and -30% counter chance
                (doubled against non-Jedi and non-Sith).
                <br><br>
                Corrupted Battle Meditation can't be dispelled.
            </p>
        </div>
    </div>

    <h2 class="titre" id="unique-ability-title"><u>Unique Ability: Sith Apprentice</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bastila basic" src="../image-perso/bsf/fallen-unique2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability">
                Bastila and the character in the leader slot have +50% Defense, Potency, and Tenacity and gain Foresight
                for 1 turn at the start of battle.
                <br><br>
                If Bastila's leader is another Sith, whenever an enemy is inflicted with Deathmark, Fear, Marked, or
                Shock, they both gain 5% Offense (stacking up to 100%) for the rest of battle. This ability does not
                apply to characters in the ally slot.
            </p>
        </div>
    </div>

    <h2 class="titre" id="unique-ability-title"><u>Unique Ability: Force Bond</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="bastila unique" src="../image-perso/bsf/fallen-unique3.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability">
                If Darth Revan is in the leader slot: Bastila and Darth Revan have +70% Max Health and +70% Health
                Steal, and Darth Revan also recovers Protection from Corrupted Battle Meditation. Allies are immune to
                all debuffs during any ability used by an enemy with Corrupted Battle Meditation (excludes debuffs from
                raid bosses and Galactic Legends).
                <br><br>
                If Jedi Knight Revan is on the enemy squad: Bastila gains Advantage and Foresight for one turn at the
                start of Jedi Knight Revan's turns.
            </p>
        </div>
    </div>

    <footer>
        <button onclick="scrollToTop()" id="scrollBtn" title="Go to top">Top</button>
        <script src="../javascript/bouton.js"></script>

        <!-- SCRIPT DE TRADUCTION -->
        <script>
            // Dictionnaire français
            const translationsFr = {
                    "big-title": "Bastila Shan (déchue)",
                    "title": "<u>Bastila Shan (déchue)</u>",
                    "description": "Puissant personnage de Soutien Sith qui inflige un grand nombre d'affaiblissements, dont le Choc, la Peur et la Méditation de combat corrompue.",
                    "darkside": "Côté Obscur",
                    "support": "Soutien",
                    "sith": "Sith",
                    "sith-empire": "Empire Sith",
                    "basic-attack-title": "<u>Attaque basique : Assaut Sith</u>",
                    "basic-attack": "Inflige des dégâts spéciaux à la cible ennemie et entrave ses capacités pendant 1 tour. Cette attaque confère un bonus de dégâts de 10% et un bonus de chance de coup critique de 10% pour chaque allié sith actif",
                    "special-attack1-title": "<u>Attaque spéciale : Foudre furieuse (délai : 2)</u>",
                    "special-attack1": "Inflige des dégâts spéciaux à une cible ennemie et lui inflige un Choc pendant 3 tours. Si la cible souffre déjà de Choc, inflige des dégâts spéciaux bonus à tous les ennemis. Ces dégâts bonus ne peuvent pas être contrés. Cette capacité ne peut pas être esquivée.",
                    "special-attack2-title": "<u>Attaque spéciale : Peur (délai : 3)</u>",
                    "special-attack2": "Inflige la <u class='speciale'>Peur</u> à une cible ennemie et à un autre ennemi aléatoire pendant 1 tour (ne peut pas être copié ni dissipé). Lorsque les deux effets de Peur prennent fin, inflige un malus d'Attaque, de Dégâts critiques, d'Esquive, de Vitesse, inflige faux pas et expose la cible pendant 2 tours. Ces effets ne peuvent pas être résistés.\n\nTous les autres ennemis subissent un malus d'attaque, de dégâts critiques, d'esquive, de vitesse, faux pas et sont exposés pendant 2 tours.\n\n <u class='speciale'>Peur</u> : Manque le prochain tour, ne peut pas utiliser ses capacités et ne peut pas esquiver. Augmente les délais de 1 tour et expire lorsque la cible subit des dégâts.",
                    "unique-ability-title": "<u>Capacité unique : Méditation de combat corrompue</u>",
                    "unique-ability": "Au début du tour de Bastila, la jauge de tour de tous les ennemis diminue de 3% (effet doublés contre les personnages qui ne sont pas Sith ou Jedi), et ils souffrent tous de la <u class='speciale'>Méditation de combat corrompue</u> pendant 1 tour. Ensuite, Bastila récupère 1% de protection pour chaque affaiblissement en cours sur les ennemis.\n\n<u class='speciale'>Méditation de combat corrompue :</u> -30% de chances de coup critique et -30% de chances de contre-attaque (effet doublé contre les personnages qui ne sont pas Sith ou Jedi).\n\n La méditation de combat corrompue ne peut pas être dissipée",
                    "unique-ability-title2": "<u>Capacité unique : Apprentie Sith</u>",
                    "unique-ability2": "Bastila et le personnage dans l'emplacement de chef ont +50% de Défense, de pouvoir et de ténacité et obtiennent Prévoyance pendant 1 tour au début de l'affrontement.\n\nSi le chef de Bastila est Sith, à chaque fois qu'un ennemi subi la marque de mort, la peur, es marqué ou souffre de choc, ils obtiennent tous deux un bonus d'attaque de 5% (cumulable jusqu'à 100%) pour le reste de l'affrontement. Cette capacité ne s'applique pas aux personnages dans l'emplacement d'allié.",
                    "unique-ability-title3": "<u>Capacité unique : Lien de la Force</u>",
                    "unique-ability3": "Si Dark Revan est dans l'emplacement de chef : Bastila et Dark Revan bénéficient tous les deux de +70% de Santé maximale et +70% de Vol de santé. Dark Revan récupère également de la Protection avec Méditation de combat corrompue. Les alliés sont immunisés contre tous les affaiblissements lorsqu'un ennemi qui souffre de méditation de combat corrompue utilise une capacité (exclut les affaiblissements des boss de raid et des légendes galactiques).\n\nSi le Chevalier Jedi Revan est dans l'escouade ennemie : Bastila obtient l'avantage et la prévoyance pendant 1 tour au début du tour du Chevalier Jedi Revan."
                };

            const originalTexts = {};

            function saveOriginalTexts() {
                for (const id in translationsFr) {
                    const el = document.getElementById(id);
                    if (el) originalTexts[id] = el.innerHTML;
                }
            }

            function replaceNewLinesWithBr(text) {
                return text.replace(/\n\s*\n/g, '<br><br>').replace(/([^\n])\n([^\n])/g, '$1<br>$2');
            }

            function switchLanguageTo(lang) {
                localStorage.setItem("selectedLanguage", lang);

                if (lang === "fr") {
                    for (const [id, text] of Object.entries(translationsFr)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = replaceNewLinesWithBr(text);
                    }
                } else if (lang === "en") {
                    for (const [id, text] of Object.entries(originalTexts)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = text;
                    }
                }

                updateFlagActive();
            }

            function updateFlagActive() {
                const lang = localStorage.getItem("selectedLanguage") || "en";
                document.getElementById("lang-en").style.borderColor = (lang === "en" ? "#007bff" : "transparent");
                document.getElementById("lang-fr").style.borderColor = (lang === "fr" ? "#007bff" : "transparent");
            }

            // ✅ Tout est dans "load" → le DOM est prêt avant exécution
            window.addEventListener("load", () => {
                saveOriginalTexts();
                const lang = localStorage.getItem("selectedLanguage") || "en";
                switchLanguageTo(lang);

                document.getElementById("lang-fr").addEventListener("click", () => switchLanguageTo("fr"));
                document.getElementById("lang-en").addEventListener("click", () => switchLanguageTo("en"));
            });
        </script>


    </footer>
</body>

</html>