<!DOCTYPE html>
<html lang="en">

<head>
    <title id="big-title">Darth Sion</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="author" content="Rimbault Enzo">
    <link rel="icon" type="image/png" href="../image-perso/sion/sion-image.png">
    <link rel="stylesheet" href="../style/unit-style.css">
</head>

<body class="simple">
    <header class="perso" style="display: flex; align-items: center;">
        <div style="flex: 0 0 20%; display: flex; justify-content: center; align-items: center;">
            <img src="../image-perso/sion/sion-image.png" alt="Darth Sion" style="max-width: 100%; max-height: 100%;">
        </div>
        <div style="flex: 1; padding-left: 20px;">
            <!-- Sélecteur de langue -->
            <div class="language-switcher">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Flag_of_France.svg" alt="Français"
                    id="lang-fr"
                    style="cursor:pointer; width:32px; height:32px; border:2px solid transparent; border-radius:50%;">
                <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" alt="English"
                    id="lang-en"
                    style="cursor:pointer; width:32px; height:32px; border:2px solid transparent; border-radius:50%;">
            </div>

            <h1 id="title"><u>Darth Sion</u></h1>
            <p id="description">
                Aggressive Sith tank that becomes stronger with Hatred
            </p>
            <br>

            <nav class="perso" style="font-size: 20px;">
                <a class="capacite" style="color: red !important" href="../classement-perso/coté-obscur.html" id="darkside">Dark Side</a>
                <a class="class" href="../classement-perso/tank.html" id="tank">Tank</a>
                <a class="capacite" href="../classement-perso/sith.html" id="sith">Sith</a>
            </nav>
        </div>
    </header>
    <br>

    <img class="first" src="../image-perso/sion/sion.png" alt="Darth Sion"><br>

    <!-- Capacités -->
    </div>

    <h2 class="titre" id="basic-attack-title"><u>Basic Attack: Dark Rage</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Darth Sion basic" src="../image-perso/sion/sion-basic.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="basic-attack">
                Deal Physical damage to target enemy and inflict Pain for 3 turns. If the target already has Pain, dispel all debuffs on Sion.
                <br><br>
                <u class="speciale">Pain:</u> This unit takes bonus damage from Darth Sion
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack1-title"><u>Special Attack : Torment (cooldown: 5)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Darth Sion special 1" src="../image-perso/sion/sion-special1.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack1">*
                Deal Physical damage to all enemies and then dispel all buffs on them. Then, inflict Pain on all enemies for 3 turns. Reduce the cooldown of this ability by 1 for each enemy without Pain. This attack can't be Evaded.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack2-title"><u>Special Attack : Break Will (cooldown: 4)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Darth Sion special 2" src="../image-perso/sion/sion-special2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack2">
                Deal Physical damage and inflict Pain on target enemy for 3 turns. This attack can't be Evaded. If the target already has Pain, this attack deals 100% more damage and Sion recovers 35% Protection.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack3-title"><u>Special Attack : Held By Hatred (cooldown: 15)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Darth Sion special 3" src="../image-perso/sion/sion-special3.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack3">
                Sion dispels all debuffs on himself, recovers 100% Health and gains 100% Turn Meter. Sion gains Hatred until he is defeated, which can't be dispelled or prevented. This ability starts on cooldown. When Sion inflicts Pain, reduce the cooldown of this ability by 1.
                <br><br>
                <u class="speciale">Hatred:</u> +25% Critical Chance, +100% Defense and Offense; when this character is defeated, they revive with 100% Health and gain 100% Turn Meter; can't be copied, dispelled or prevented
            </p>
        </div>
    </div>    

    <h2 class="titre"><u id="unique-ability-title">Unique Ability : Lord of Pain</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="Darth Sion unique" src="../image-perso/sion/sion-unique.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability">
                Sion has +100% Defense and +100% Tenacity against enemies with Pain. At the start of each enemy's turn, if they have Pain, Sion gains Taunt until the end of the turn. At the end of each turn, Sion inflicts Pain for 3 turns on enemies who damaged him that turn. When allied Darth Traya or Darth Nihilus are Critically Hit, reduce Held By Hatred's cooldown by 1.
            </p>
        </div>
    </div>

    <footer>
        <button onclick="scrollToTop()" id="scrollBtn" title="Go to top">Top</button>
        <script src="../javascript/bouton.js"></script>

        <!-- SCRIPT DE TRADUCTION -->
        <script>
            // Dictionnaire français
            const translationsFr = {
                "big-title": "Dark Sion",
                "title": "<u>Dark Sion</u>",
                "description": "Tank Sith agressif qui devient plus fort avec la haine",
                "darkside": "Coté Obscur",
                "tank": "Tank",
                "sith": "Sith",

                "basic-attack-title": "<u>Attaque Basique: Rage obscure</u>",
                "basic-attack": "Inflige des dégâts physiques à une cible ennemie et inflige Douleur pendant 3 tours. Si la cible subit déjà Douleur, dissipe tous les affaiblissements sur Sion.\n\n<u class='speciale'>Douleur :</u> dark Sion inflige plus de dégâts à cette unité.",

                "special-attack1-title": "<u>Attaque Spéciale : Tourment (délai : 5)</u>",
                "special-attack1": "Inflige des dégâts physiques à tous les ennemis puis dissipe toutes leurs améliorations. Ensuite, inflige la douleur à tous les ennemis pendant 3 tours. Réduit le délai de cette capacité de 1 pour chaque ennemi ne subissant pas la douleur. Cette attaque ne peut pas être esquivée.",

                "special-attack2-title": "<u>Attaque Spéciale : Destruction de volonté (délai : 4)</u>",
                "special-attack2": "Inflige des dégâts physiques et la douleur à une cible ennemie pendant 3 tours. Cette attaque ne epeut pas être esquivée. Si la cible subit déjà la douleur, cette attaque inflige 100 % de dégâts supplémentaires et Sion récupère 35 % de protection.",

                "special-attack3-title": "<u>Attaque Spéciale : Tenu par la haine (délai : 15)</u>",
                "special-attack3": "Sion dissipe tous les affaiblissements qui l'affectent, récupère 100 % de santé et sa jauge de tour se remplit de 100 %. Sion utilise la haine jusqu'à ce qu'il soit vaincu, qui ne peut pas être dissipée ou évitée. Cette capacité commence avec un délai. Quand Sion inflige la douleur, réduit le délai de cette capacité de 1.\n\n<u class='speciale'>Haine :</u> +25 % de chances de coup critique, +100 % de défense et +100 % d'attaque. Quand cette unité est vaincue, elle est ranimée avec 100 M% de santé et sa jauge de tour se remplit de 100 % ; ne peut pas être copié, dissipé ou empêché. ",

                "unique-ability-title": "<u>Capacité Unique : Seigneur de la douleur</u>",
                "unique-ability": "Sio obtient un bonus de défense de +100 % et de ténacité de +100 % contre les ennemis qui souffrent de douleur. Au début de chaque tour ennemi, si l'ennemi souffre de douleur, Sion utilise la raillerie jusqu'à la fin de son tour. A la fin de chaque tour, Sion inflige la douleur pendant 3 tours aux ennemis qui lui ont infligés des dégâts pendant le tour. Quand les alliés Dark Traya et Dark Nihilus subissent des coups critiques, le délai de Tenu par la haine est réduit de 1.",
            };

            const originalTexts = {};

            function saveOriginalTexts() {
                for (const id in translationsFr) {
                    const el = document.getElementById(id);
                    if (el) originalTexts[id] = el.innerHTML;
                }
            }

            function replaceNewLinesWithBr(text) {
                return text.replace(/\n\s*\n/g, '<br><br>').replace(/([^\n])\n([^\n])/g, '$1<br>$2');
            }

            function switchLanguageTo(lang) {
                sessionStorage.setItem("selectedLanguage", lang);

                if (lang === "fr") {
                    for (const [id, text] of Object.entries(translationsFr)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = replaceNewLinesWithBr(text);
                    }
                } else if (lang === "en") {
                    for (const [id, text] of Object.entries(originalTexts)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = text;
                    }
                }

                updateFlagActive();
            }

            function updateFlagActive() {
                const lang = sessionStorage.getItem("selectedLanguage") || "en";
                document.getElementById("lang-en").style.borderColor = (lang === "en" ? "#007bff" : "transparent");
                document.getElementById("lang-fr").style.borderColor = (lang === "fr" ? "#007bff" : "transparent");
            }

            // ✅ Tout est dans "load" → le DOM est prêt avant exécution
            window.addEventListener("load", () => {
                saveOriginalTexts();
                const lang = sessionStorage.getItem("selectedLanguage") || "en";
                switchLanguageTo(lang);

                document.getElementById("lang-fr").addEventListener("click", () => switchLanguageTo("fr"));
                document.getElementById("lang-en").addEventListener("click", () => switchLanguageTo("en"));
            });
        </script>

    </footer>
</body>

</html>