<!DOCTYPE html>
<html lang="en">

<head>
    <title id="big-title">Rey (Dark Side Vision)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="author" content="Rimbault Enzo">
    <link rel="icon" type="image/png" href="../image-perso/dark-rey/dark-rey-image.png">
    <link rel="stylesheet" href="../style/unit-style.css">
</head>

<body class="simple">
    <header class="perso" style="display: flex; align-items: center;">
        <div style="flex: 0 0 20%; display: flex; justify-content: center; align-items: center;">
            <img src="../image-perso/dark-rey/dark-rey-image.png" alt="Rey (Dark Side Vision)" style="max-width: 100%; max-height: 100%;">
        </div>
        <div style="flex: 1; padding-left: 20px;">
            <!-- Sélecteur de langue -->
            <div class="language-switcher">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Flag_of_France.svg" alt="Français"
                    id="lang-fr"
                    style="cursor:pointer; width:32px; height:32px; border:2px solid transparent; border-radius:50%;">
                <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" alt="English"
                    id="lang-en"
                    style="cursor:pointer; width:32px; height:32px; border:2px solid transparent; border-radius:50%;">
            </div>

            <h1 id="title"><u>Rey (Dark Side Vision)</u></h1>
            <p id="description">
                A dark vision of what could have been if Rey were to succumb to the Dark Side
            </p>
            <br>

            <nav class="perso" style="font-size: 20px;">
                <a class="capacite" style="color: red !important" href="../classement-perso/coté-obscur.html" id="darkside">Dark Side</a>
                <a class="class" href="../classement-perso/attaquant.html" id="attacker">Attacker</a>
                <a class="capacite" href="../classement-perso/premier-odre.html" id="first-order">First Order</a>
                <a class="capacite" href="../classement-perso/sith.html" id="sith">Sith</a>
            </nav>
        </div>
    </header>
    <br>

    <img class="first" src="../image-perso/dark-rey/dark-rey.png" alt="Rey (Dark Side Vision)">

    <!-- Capacités -->

    <h2 class="titre" id="basic-attack-title"><u>Basic Attack: Surrender to Darkness</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="dark rey basic" src="../image-perso/dark-rey/dark-rey-basic.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="basic-attack">
                Deal Physical damage twice to target enemy. This attack ignores 50% Protection. If the enemy had full Health or Protection Up at the start of this attack, attack again (max 3 attacks total). On her turn, if she deals at least 3 instances of damage, target enemy is Feared for 1 turn, which can't be resisted.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack1-title"><u>Special Attack : Corrupted Reflection (cooldown: 4)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="dark rey special 1" src="../image-perso/dark-rey/dark-rey-spe1.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack1">
                Deal Physical damage to all enemies then attack target enemy again if there is a defeated enemy. First Order allies gain Retaliate and Retribution for 2 turns. If Supreme Leader Kylo Ren is the ally in the Leader slot, he gains 10% Ultimate charge.
            </p>
        </div>
    </div>

    <h2 class="titre" id="special-attack2-title"><u>Special Attack : Malevolent Lineage (cooldown: 4)</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="dark rey special 2" src="../image-perso/dark-rey/dark-rey-spe2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="special-attack2">
                Deal True damage to all enemies split among them. If all allies are First Order and there is any version of Kylo Ren in the allied Leader slot, Shock all enemies for 1 turn, he is called to assist, then all other non-Taunting First Order allies not in the Leader slot gain Stealth for 1 turn.
                <br><br>
                If Supreme Leader Kylo Ren is the ally in the Leader slot, he gains 5 Siphon per enemy and 100% Defense for 1 turn.
                <br><br>
                <u class="omicron">Omicron Boost : While in Grand Arenas:</u> Shock can't be dispelled or resisted. Enemies defeated by this ability can't be revived. Remove 100% Turn Meter from all characters. Enemies with bonus Protection, Protection Up, or Shield Up reduce their Max Health and Max Protection by 20% (stacking; excluding Galactic Legends and Raid Bosses) for the rest of the encounter.
                <br><br>
                If there is any version of Kylo Ren in the allied Leader slot, all First Order allies recover 50% Health and Protection and gain Speed Up for 2 turns.
            </p>
        </div>
    </div>

    <h2 class="titre"><u id="unique-ability1-title">Unique Ability : Dont Be Afraid of Who You Are</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="dark rey unique" src="../image-perso/dark-rey/dark-rey-unique1.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability1">
                Rey has +25% Critical Chance and Critical Damage. Rey's abilities can't be evaded. While Rey has Retaliate, she recovers Protection at the end of the turn equal to 100% of the damage she received. While Rey is debuffed, she has +50% Speed.
                <br><br>
                If Rey defeats an enemy (excluding summoned units), all allies defeated by that enemy are revived with 100% Health. Whenever an enemy without 100% Turn Meter gains bonus Turn Meter, reduce their Max Protection by 5% (10% if it was a bonus turn; excluding Galactic Legends and Raid Bosses) for the rest of the encounter and persists through defeat.
                <br><br>
                <u class="omicron">Omicron Boost : While in Grand Arenas:</u> All other First Order allies with Retaliate recover Protection at the end of the turn equal to 100% of the damage they received. First Order allies with Advantage ignore Taunt effects on their turn.
                <br><br>
                If the ally in the Leader slot is Supreme Leader Kylo Ren, whenever he enters Aggressive Stance, the cooldown of Malevolent Lineage is reset.
            </p>
        </div>
    </div>

    <h2 class="titre"><u id="unique-ability2-title">Unique Ability : In Our Nature</u></h2>
    <div class="capacity-container">
        <div class="left-column">
            <img class="attaque" alt="dark rey unique" src="../image-perso/dark-rey/dark-rey-unique2.png">
        </div>
        <div class="right-column">
            <p class="attaque" id="unique-ability2">
                If all allies are First Order at the start of battle, Rey gains 100% Max Health. At the start of the encounter, if the ally in the leader slot is any version of Kylo Ren, Rey is untargetable until all enemies have taken a turn or are defeated. Whenever an enemy is defeated, all characters lose 100% Turn Meter and all First Order allies gain Advantage for 2 turns.
                <br><br>
                Enemies with less than full Health have -200% Critical Avoidance. Whenever an enemy with less than 100% Health recovers to full Health they dispel all buffs on themselves.
                <br><br>
                <u class="omicron">Omicron Boost : While in Grand Arenas:</u> While Rey is untargetable from this ability, First Order allies can't be defeated. While an enemy is less than full Health they can't recover Protection. Whenever a First Order ally is inflicted with a debuff, they lose 1% Turn Meter (once per turn) and gain 1% Offense (stacking) for the rest of the encounter.
            </p>
        </div>
    </div>

    <footer>
        <button onclick="scrollToTop()" id="scrollBtn" title="Go to top">Top</button>
        <script src="../javascript/bouton.js"></script>

        <!-- SCRIPT DE TRADUCTION -->
        <script>
            // Dictionnaire français
            const translationsFr = {
                "big-title": "Rey (Vision du Côté Obscur)",
                "title": "<u>Rey (Vision du Côté Obscur)</u>",
                "description": "Une vision sombre de ce qui aurait pu se passer si Rey avait succombé au Côté Obscur.",
                "darkside": "Coté Obscur",
                "attacker": "Attaquant",
                "first-order": "Premier Ordre",
                "sith": "Sith",

                "basic-attack-title": "<u>Attaque Basique: Succombez à l'Obscurité</u>",
                "basic-attack": "Inflige des dégâts physiques deux fois à une cible ennemie. Cette attaque ignore 50 % de protection. Si l'ennemi diposait de toute sa santé ou d'un bonus de protection au début de cette attaque, attaque une deuxième fois (maximum 3 attaques au total). Lors de son tour, si elle inflige au moins 3 instances de dégâts, l'enneci ciblé devient Redouté pendant 1 tour (ne peut pas être résisté).",

                "special-attack1-title": "<u>Attaque Spéciale : Reflet corrompu (délai : 4)</u>",
                "special-attack1": "Inflige des dégâts physiques à tous les ennemis puis attaque de nouveau la cible ennemie s'il y a un ennemi vaincu. Les alliés du Premier Ordre obtiennent Représailles et Rétribution pendant 2 tours. Si le Suprême Leader Kylo Ren est dans l'emplacement de chef, il gagne 10 % de charge ultime.",

                "special-attack2-title": "<u>Attaque Spéciale : Lignée malveillante (délai : 4)</u>",
                "special-attack2": "Inflige des dégâts réels à tous les ennemis, répartis entre eux. Si tous les alliés appartiennent au Premier Ordre et qu'il y a une version de Kylo Ren dans l'emplacement de chef allié, inflige Choc à tous les ennemis pendant 1 tour, il est appelé en renfort, puis tous les autres alliés du Premier Ordre qui n'utilisent pas Raillerie et qui ne sont pas dans l'emplacement de chef gagnent le Camouflage pendant 1 tour.\n\nSi le Suprêe Leader Kylo Ren est l'allié dans l'emplacement de chef, il gagne 5 cumuls de Siphonnage et 100 % de défense pendant 1 tour.\n\n<u class='omicron'>Amélioration Omicron : Dans les Grandes arènes :</u> Choc ne peut pas être dissipé ou résisté. Les ennemis vaincus par cette capacité ne peuvent pas être ranimés. Supprime 100 % de jauge de tour sur tous les personnages. Les ennemis avec une protection augmentée, un bonus de protection ou Derrière le bouclier réduisent leur santé maximale et leur protection maximale de 20 % (cumulatif, à l'exception des Légendes Galactiques et des boss de raid) pendant le reste de l'affrontement.\n\nS'il y a une version de Kylo Ren dans l'emplacement de chef allié, les alliés du Premier Ordre récupèrent 50 % de santé et de protection et gagnent un bonus de vitesse pendant 2 tours.",

                "unique-ability1-title": "<u>Capacité Unique : N'aie pas peur de ce que tu est</u>",
                "unique-ability1": "Rey a +25 % de chances de coup critique et de dégâts critiques. Les capacités de Rey ne peuvent pas être esquivés. Tant que Rey dispose de Représailles, elle récupère à la fin du tour une protection égale à 100 % des dégâts qu'elle a subis. Tant que Rey est affectée par un affaiblissement, elle a +50 % de vitesse.\n\nSi Rey éliminé un ennmi (à l'exception des unités invoquées), tous les alliés vaincus par cette ennemi sont ranimés avec 100 % de santé. Chaque fois qu'un ennemi ave moins de 100 % de jauge de tour obtient des bonus de jauge de tour; sa protection maximale est réduite de 5 % (10 % si c'était un tour bonus ; à l'exception des Légendes Galactiques et les boss de raid) pour le reste du combat (persiste en cas de défaite)\n\n<u class='omicron'>Amélioration Omicron : Dans les Grandes arènes :</u> Tous les autres alliés du Premier Ordre avec Représailles récupèrent à la fin du tour une protection égale à 100 % des dégâts qu'ils ont subis. Les alliés du Premier Ordre avec Avantage ignorent Raillerie lors de leur tour.\n\nSi l'allié dans l'emplacement de chef est le Suprême Leader Kylo Ren, chaque fois qu'il adopte une posture agressive, le délai de Lignée malveillante est réinitialisé.",

                "unique-ability2-title": "<u>Capacité Unique : Dans notre nature</u>",
                "unique-ability2": "Si au début de la bataille, tous les alliés appartiennent au Premier Ordre, Rey obtient 100 % de santé maximale. Au début de l'affrontement, si l'allié dans l'emplacement de chef est une version de Kylo Ren, Rey est impossible à cibler jusqu'à ce que tous les ennemis aient joué un tour ou soient vaincu, tous les personnages perdent 100 % de jauge de tour et tous les alliés du Premier Ordre obtiennent Avantage pendant 2 tours.\n\nLes ennemis n'ayant pas toute leur santé ont -200 % d'esquive des critiques. Lorsqu'un ennemi ayant moins de 100 % de sa santé récupère toute sa santé, il dissipe tous ses bonus.\n\n<u class='omicron'>Amélioration Omicron : Dans les Grandes arènes :</u> Tant que Rey est impossible à cibler avec cette capacité, les alliés du Premier Ordre ne peuvent pas être vaincus. Tant qu'un ennemi n'a pas toute sa santé, in ne peut pas récupèrer de protection. Lorsqu'un allié du Premier Ordre subit un affaiblissement, il perd 1 % de jauge de tour (une fois par tour) et obtient 1 % d'attaque (cumulatif) pour le reste de l'affrontement').",
            };

            const originalTexts = {};

            function saveOriginalTexts() {
                for (const id in translationsFr) {
                    const el = document.getElementById(id);
                    if (el) originalTexts[id] = el.innerHTML;
                }
            }

            function replaceNewLinesWithBr(text) {
                return text.replace(/\n\s*\n/g, '<br><br>').replace(/([^\n])\n([^\n])/g, '$1<br>$2');
            }

            function switchLanguageTo(lang) {
                sessionStorage.setItem("selectedLanguage", lang);

                if (lang === "fr") {
                    for (const [id, text] of Object.entries(translationsFr)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = replaceNewLinesWithBr(text);
                    }
                } else if (lang === "en") {
                    for (const [id, text] of Object.entries(originalTexts)) {
                        const el = document.getElementById(id);
                        if (el) el.innerHTML = text;
                    }
                }

                updateFlagActive();
            }

            function updateFlagActive() {
                const lang = sessionStorage.getItem("selectedLanguage") || "en";
                document.getElementById("lang-en").style.borderColor = (lang === "en" ? "#007bff" : "transparent");
                document.getElementById("lang-fr").style.borderColor = (lang === "fr" ? "#007bff" : "transparent");
            }

            // ✅ Tout est dans "load" → le DOM est prêt avant exécution
            window.addEventListener("load", () => {
                saveOriginalTexts();
                const lang = sessionStorage.getItem("selectedLanguage") || "en";
                switchLanguageTo(lang);

                document.getElementById("lang-fr").addEventListener("click", () => switchLanguageTo("fr"));
                document.getElementById("lang-en").addEventListener("click", () => switchLanguageTo("en"));
            });
        </script>

    </footer>
</body>

</html>